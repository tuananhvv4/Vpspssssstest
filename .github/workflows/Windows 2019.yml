name: Windows Server 2019
run-name: ChÃ o má»«ng ${{ github.actor }} Ä‘áº¿n vá»›i Rinne VPS ðŸš€
on:
  workflow_dispatch:
    inputs:
      os:
        description: 'Nháº­p token Ngrok'
        required: true
      os2:
        description: 'Nháº­p máº­t kháº©u'
        required: true
      os4:
        description: 'Táº¡o tÃªn ngÆ°á»i dÃ¹ng riÃªng'
        required: false
      os3:
        description: '(Tuá»³ Chá»n) Nháº­p cÃ¡c gÃ³i á»Ÿ Chocolatey, vÃ­ dá»¥ "firefox googlechrome vlc aegisub handbrake..." '
        required: false
jobs:
  Windows_Server_2019:
    timeout-minutes: 360
    runs-on: windows-2019
    name: Äang cháº¡y
    steps:
    - name: Táº£i code cáº¥u hÃ¬nh...
      uses: actions/checkout@v1
      timeout-minutes: 360
    - name: Táº¡o tÃ i khoáº£n
      run: |
            powershell.exe -File 1.ps1 > $null
            net.exe user $env:UserName ${{ github.event.inputs.os2 }}
            net.exe user installer ${{ github.event.inputs.os2 }}
            net user ${{ github.event.inputs.os4 }} ${{ github.event.inputs.os2 }} /add 
            net localgroup administrators ${{ github.event.inputs.os4 }} /add
      timeout-minutes: 360
    - name: Setup cho Ngrok vÃ  Remote Desktop
      run: |
            powershell.exe -File 2.ps1
            ngrok authtoken ${{ github.event.inputs.os }}
    - name: Cháº¡y Ngrok
      shell: bash
      run: bash 3389.sh
      timeout-minutes: 360
    - name: Sau Ä‘Ã¢y lÃ  máº­t kháº©u vÃ  username
      run: |
            write-host Username: $env:UserName
            write-host Username: installer
            write-host Password: HIá»‚N THá»Š Máº¬T KHáº¨U ÄÃƒ Bá»Š XOÃ VÃŒ LÃ DO Báº¢O Máº¬T

         
      timeout-minutes: 360
    - name: Nháº­n IP VPS
      run: |
            write-host IP LÃ€:
            curl -s localhost:4040/api/tunnels | jq -r .tunnels[0].public_url || echo "Lá»—i token"
            
            choco install ${{ github.event.inputs.os3 }} > $null
            
      timeout-minutes: 360
    - name: ThÃ nh cÃ´ng!
      run: |
            ping -t localhost > $null
      timeout-minutes: 999
